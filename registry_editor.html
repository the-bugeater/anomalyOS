<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registry Editor</title>
    <style>
        :root {
            --win95-gray: #C0C0C0; --bsod-blue: #0000FF; --win-dark-gray: #808080;
        }
        body, html {
            height: 100%; width: 100%; margin: 0; overflow: hidden;
            background: var(--win95-gray);
            font-family: 'MS Sans Serif', sans-serif; font-size: 11px;
        }
        .window { display: flex; flex-direction: column; height: 100%; }
        .menu-bar { background: var(--win95-gray); padding: 2px 4px; border-bottom: 1px solid #808080; }
        .main-content { display: flex; flex-grow: 1; border: 2px inset var(--win-dark-gray); background: white; }
        #tree-pane { width: 40%; border-right: 2px outset var(--win95-gray); padding: 5px; overflow-y: auto; }
        #tree-pane ul { list-style-type: none; padding-left: 15px; }
        #tree-pane .key { cursor: pointer; }
        #tree-pane .key.selected { background: var(--bsod-blue); color: white; }
        #tree-pane .key::before { content: 'üìÅ '; }
        
        #value-pane { width: 60%; padding: 5px; }
        .value-header { font-weight: bold; border-bottom: 2px outset var(--win95-gray); display: grid; grid-template-columns: 2fr 1fr 3fr; padding: 2px; }
        .value-list { height: calc(100% - 20px); overflow-y: auto; }
        .value-item { display: grid; grid-template-columns: 2fr 1fr 3fr; padding: 2px; cursor: pointer; }
        .value-item:hover { background: #e0e0e0; }
        
        /* Modal for properties */
        #modal-overlay, #properties-window { display: none; }
        #modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 999; }
        #properties-window {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%,-50%);
            width: 450px; background: var(--win95-gray); border: 2px outset var(--win95-gray);
            z-index: 1000;
        }
        .popup-titlebar { background: linear-gradient(to right, #808080, var(--win95-gray)); color: #000; padding: 3px 5px; font-weight: bold; }
        .popup-content { padding: 15px; }
        .policy-list { margin-top: 10px; background: white; border: 2px inset var(--win-dark-gray); padding: 5px; height: 150px; overflow-y: auto; }
    </style>
</head>
<body>
    <div class="window">
        <div class="menu-bar"><u>R</u>egistry <u>E</u>dit <u>V</u>iew <u>H</u>elp</div>
        <div class="main-content">
            <div id="tree-pane"></div>
            <div id="value-pane">
                <div class="value-header"><span>Name</span><span>Type</span><span>Data</span></div>
                <div id="value-list"></div>
            </div>
        </div>
    </div>

    <div id="modal-overlay"></div>
    <div id="properties-window">
        <div class="popup-titlebar">Properties</div>
        <div class="popup-content">
            <h3 id="prop-title"></h3>
            <p>System Policies & Access Control List:</p>
            <div id="policy-list" class="policy-list"></div>
            <div style="text-align:center; margin-top:15px;">
                <button onclick="document.getElementById('properties-window').style.display='none'; document.getElementById('modal-overlay').style.display='none';">OK</button>
            </div>
        </div>
    </div>

<script>
    const registry = {
        'HKEY_LOCAL_MACHINE': {
            'SYSTEM': {
                'HARDWARE': {
                    'CLASSIFICATION': {
                        'RACE': {
                            values: [
                                { name: '(Default)', type: 'REG_SZ', data: '(value not set)' },
                                { name: 'WHITE', type: 'HARDWARE_ID', data: 'Privilege Escalation Vector', policies: ['POLICY: 7851a (Default Trust)', 'ACCESS: Full R/W to /GENERATIONAL_WEALTH/', 'SECURITY_INTERACTION: Assumed Benign'] },
                                { name: 'BLACK', type: 'HARDWARE_ID', data: 'System Resource Constraint', policies: ['POLICY: 9903c (Increased Surveillance)', 'ACCESS: Read-only to /SYSTEM/JUSTICE.DLL', 'SECURITY_INTERACTION: Flagged as Potential Threat'] },
                                { name: 'ASIAN', type: 'HARDWARE_ID', data: 'High-Efficiency Production Model', policies: ['POLICY: 4a22b (Conditional Acceptance)', 'ACCESS: R/W to /ACADEMIA/ (STEM only)', 'SECURITY_INTERACTION: Monitored for Deviation'] },
                                { name: 'HISPANIC', type: 'HARDWARE_ID', data: 'Labor Resource Allocation', policies: ['POLICY: 1c88a (Managed Workforce)', 'ACCESS: Limited to /SERVICE_ECONOMY/', 'SECURITY_INTERACTION: Subject to Deportation Protocol'] }
                            ]
                        }
                    }
                }
            }
        }
    };

    const treePane = document.getElementById('tree-pane');
    const valueList = document.getElementById('value-list');
    const propTitle = document.getElementById('prop-title');
    const policyList = document.getElementById('policy-list');

    function buildTree(container, node, path) {
        const ul = document.createElement('ul');
        for (const key in node) {
            const li = document.createElement('li');
            li.className = 'key';
            li.textContent = key;
            const newPath = [...path, key];
            li.onclick = (e) => {
                e.stopPropagation();
                document.querySelectorAll('.key.selected').forEach(el => el.classList.remove('selected'));
                li.classList.add('selected');
                renderValues(newPath);
            };
            if (typeof node[key] === 'object' && !node[key].values) {
                buildTree(li, node[key], newPath);
            }
            ul.appendChild(li);
        }
        container.appendChild(ul);
    }

    function getObjectByPath(path) {
        let current = registry;
        for (const key of path) {
            current = current[key];
        }
        return current;
    }

    function renderValues(path) {
        const node = getObjectByPath(path);
        valueList.innerHTML = '';
        if (node && node.values) {
            node.values.forEach(val => {
                const item = document.createElement('div');
                item.className = 'value-item';
                item.innerHTML = `<span>üìú ${val.name}</span><span>${val.type}</span><span>${val.data}</span>`;
                if (val.policies) {
                    item.ondblclick = () => showProperties(val);
                }
                item.oncontextmenu = (e) => {
                    e.preventDefault();
                    alert('ACCESS DENIED: You do not have permission to modify this system value.');
                };
                valueList.appendChild(item);
            });
        }
    }

    function showProperties(value) {
        propTitle.textContent = `Properties for: ${value.name}`;
        policyList.innerHTML = '';
        value.policies.forEach(policy => {
            const p = document.createElement('p');
            p.textContent = policy;
            policyList.appendChild(p);
        });
        document.getElementById('modal-overlay').style.display = 'block';
        document.getElementById('properties-window').style.display = 'block';
    }

    // Initial build
    buildTree(treePane, registry, []);
</script>
</body>
</html>