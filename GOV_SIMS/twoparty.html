<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TWO_PARTY_SYSTEM.EXE</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Courier+Prime&display=swap');
        :root {
            --crt-green: #00FF41; --amber: #FFBF00; --error-red: #FF0000;
            --blue-team: #0066FF; --red-team: #FF0000; --background: #0A0A0A;
        }
        body, html {
            height: 100%; width: 100%; margin: 0; overflow: hidden;
            background: var(--background);
            font-family: 'Courier Prime', monospace;
            color: var(--crt-green);
        }
        .container {
            width: 100%; height: 100%;
            display: flex; justify-content: center; align-items: center;
            padding: 20px;
        }
        .game-window {
            width: 100%; max-width: 800px;
            height: 90vh; max-height: 600px;
            background: #000;
            border: 2px solid var(--crt-green);
            box-shadow: 0 0 20px var(--crt-green);
            display: flex; flex-direction: column;
        }
        .screen { display: none; }
        .screen.active { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; text-align: center; }

        /* --- Character Select Screen --- */
        #char-select .title {
            font-family: 'Press Start 2P', cursive;
            font-size: 2rem; color: var(--amber);
            animation: flicker 1.5s infinite;
        }
        .char-container { display: flex; gap: 40px; margin-top: 30px; }
        .char-box {
            border: 2px solid #555; padding: 15px;
            cursor: pointer;
        }
        .char-box:hover { background: #111; border-color: var(--crt-green); }
        .char-box .name { font-size: 1.5rem; font-weight: bold; }
        #char-blue .name { color: var(--blue-team); }
        #char-red .name { color: var(--red-team); }

        /* --- Fight Screen --- */
        #fight-screen { justify-content: space-between; }
        .hud { display: flex; justify-content: space-between; width: 100%; padding: 10px; }
        .player-info { width: 45%; }
        .player-info .name { font-size: 1.2rem; margin-bottom: 5px; }
        .health-bar-bg { background: #222; border: 1px solid var(--crt-green); padding: 2px; }
        .health-bar { height: 20px; transition: width 0.5s; }
        #p1-name { color: var(--blue-team); }
        #p1-health { background: var(--blue-team); }
        #p2-name { color: var(--red-team); text-align: right; }
        #p2-health { background: var(--red-team); }

        .stage { 
            flex-grow: 1; width: 100%; height: 250px;
            display: flex; justify-content: space-around; align-items: center;
            background: linear-gradient(to bottom, #000022 0%, #000044 100%);
            border: 1px solid var(--crt-green);
        }
        .fighter {
            font-size: 12px; line-height: 1.1;
        }
        #player { color: var(--blue-team); }
        #enemy { color: var(--red-team); }
        #corporate-sponsor { font-size: 10rem; color: var(--amber); display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); }

        .battle-interface {
            width: 100%; height: 200px;
            border-top: 2px solid var(--crt-green);
            display: flex; flex-direction: column;
        }
        
        .dialogue-section {
            height: 100px; padding: 10px; overflow-y: auto;
            border-bottom: 1px solid var(--crt-green);
        }
        
        .attack-menu {
            height: 90px; padding: 10px;
            display: none;
        }
        
        .attack-menu.active { display: block; }
        
        .attack-grid {
            display: grid; grid-template-columns: 1fr 1fr;
            gap: 10px; height: 100%;
        }
        
        .attack-button {
            background: #111; border: 2px solid var(--crt-green);
            color: var(--crt-green); padding: 8px;
            cursor: pointer; font-family: inherit;
            transition: all 0.2s;
        }
        
        .attack-button:hover {
            background: var(--crt-green); color: #000;
            box-shadow: 0 0 10px var(--crt-green);
        }
        
        .turn-indicator {
            font-weight: bold; color: var(--amber);
            margin-bottom: 10px;
        }
        .final-winner {
            font-family: 'Press Start 2P', cursive; font-size: 3rem; color: var(--amber);
            animation: flicker 1s infinite;
        }
        @keyframes flicker { 0%, 100% { opacity: 1; } 50% { opacity: 0.8; } }
    </style>
</head>
<body>
    <div class="container">
        <div class="game-window">
            <div id="char-select" class="screen active">
                <h1 class="title">CHOOSE YOUR FIGHTER</h1>
                <div class="char-container">
                    <div id="char-blue" class="char-box">
                        <pre id="blue-ascii"></pre>
                        <div class="name">BLUE MAVERICK</div>
                    </div>
                    <div id="char-red" class="char-box">
                        <pre id="red-ascii"></pre>
                        <div class="name">RED PATRIOT</div>
                    </div>
                </div>
            </div>
            <div id="fight-screen" class="screen">
                <div class="hud">
                    <div class="player-info">
                        <div id="p1-name" class="name">BLUE MAVERICK</div>
                        <div class="health-bar-bg"><div id="p1-health" class="health-bar" style="width: 100%;"></div></div>
                    </div>
                    <div class="player-info">
                        <div id="p2-name" class="name">RED PATRIOT</div>
                        <div class="health-bar-bg"><div id="p2-health" class="health-bar" style="width: 100%;"></div></div>
                    </div>
                </div>
                <div class="stage">
                    <pre id="player" class="fighter"></pre>
                    <pre id="enemy" class="fighter"></pre>
                    <div id="corporate-sponsor">$</div>
                </div>
                <div class="battle-interface">
                    <div id="dialogue-section" class="dialogue-section"></div>
                    <div id="attack-menu" class="attack-menu">
                        <div class="turn-indicator">Choose your attack:</div>
                        <div class="attack-grid" id="attack-grid"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

<script>
    const charSelectScreen = document.getElementById('char-select');
    const fightScreen = document.getElementById('fight-screen');
    const dialogueSection = document.getElementById('dialogue-section');
    const attackMenu = document.getElementById('attack-menu');
    const attackGrid = document.getElementById('attack-grid');

    const blueBox = document.getElementById('char-blue');
    const redBox = document.getElementById('char-red');

    const p1Health = document.getElementById('p1-health');
    const p2Health = document.getElementById('p2-health');
    const player = document.getElementById('player');
    const enemy = document.getElementById('enemy');

    const blueMoves = [
        { name: "COMPASSIONATE RHETORIC", power: 25, accuracy: 90 },
        { name: "MEANS-TESTED REFORM", power: 20, accuracy: 95 },
        { name: "BIPARTISAN COMPROMISE", power: 15, accuracy: 100 },
        { name: "A CALL FOR UNITY", power: 30, accuracy: 85 }
    ];
    
    const redMoves = [
        { name: "FISCAL RESPONSIBILITY", power: 25, accuracy: 90 },
        { name: "PROTECT OUR TRADITIONS", power: 20, accuracy: 95 },
        { name: "CUT GOVERNMENT SPENDING", power: 30, accuracy: 85 },
        { name: "A RETURN TO VALUES", power: 15, accuracy: 100 }
    ];
    
    let gameState = {
        playerHealth: 100,
        enemyHealth: 100,
        currentTurn: 'player',
        gameRunning: false,
        waitingForInput: false,
        selectedCharacter: null // 'blue' or 'red'
    };

    // ASCII art frames
    const fighterFrames = {
        idle: `  O  
 /|\\ 
 / \\ `,
        attack: `  O  
>/|\\ 
 / \\ `,
        hurt: `  O  
</|\\ 
 / \\ `
    };

    document.getElementById('blue-ascii').textContent = fighterFrames.idle;
    document.getElementById('red-ascii').textContent = fighterFrames.idle;

    function logDialogue(text) {
        dialogueSection.innerHTML += `<p>&gt; ${text}</p>`;
        dialogueSection.scrollTop = dialogueSection.scrollHeight;
    }

    function animateCharacter(character, frame, duration = 800) {
        character.textContent = frame;
        setTimeout(() => {
            character.textContent = fighterFrames.idle;
        }, duration);
    }

    function createAttackButtons() {
        attackGrid.innerHTML = '';
        const playerMoves = gameState.selectedCharacter === 'blue' ? blueMoves : redMoves;
        playerMoves.forEach((move, index) => {
            const button = document.createElement('button');
            button.className = 'attack-button';
            button.textContent = move.name;
            button.onclick = () => playerAttack(move);
            attackGrid.appendChild(button);
        });
    }

    function showAttackMenu() {
        if (gameState.currentTurn === 'player' && gameState.gameRunning) {
            attackMenu.classList.add('active');
            gameState.waitingForInput = true;
        }
    }

    function hideAttackMenu() {
        attackMenu.classList.remove('active');
        gameState.waitingForInput = false;
    }

    function playerAttack(move) {
        if (!gameState.waitingForInput || gameState.currentTurn !== 'player') return;
        
        hideAttackMenu();
        const characterName = gameState.selectedCharacter === 'blue' ? 'BLUE MAVERICK' : 'RED PATRIOT';
        logDialogue(`${characterName} uses ${move.name}!`);
        
        // Calculate if attack hits
        const hitRoll = Math.random() * 100;
        if (hitRoll <= move.accuracy) {
            const damage = move.power + Math.random() * 10;
            gameState.enemyHealth = Math.max(0, gameState.enemyHealth - damage);
            p2Health.style.width = gameState.enemyHealth + '%';
            
            animateCharacter(player, fighterFrames.attack);
            setTimeout(() => {
                animateCharacter(enemy, fighterFrames.hurt, 600);
                logDialogue(`It deals ${Math.round(damage)} damage!`);
            }, 400);
        } else {
            animateCharacter(player, fighterFrames.attack);
            logDialogue(`The attack missed!`);
        }
        
        // Check if enemy is defeated
        setTimeout(() => {
            if (gameState.enemyHealth <= 0) {
                endGame();
            } else {
                gameState.currentTurn = 'enemy';
                setTimeout(enemyTurn, 1500);
            }
        }, 1200);
    }

    function enemyTurn() {
        if (gameState.currentTurn !== 'enemy' || !gameState.gameRunning) return;
        
        const enemyMoves = gameState.selectedCharacter === 'blue' ? redMoves : blueMoves;
        const enemyName = gameState.selectedCharacter === 'blue' ? 'RED PATRIOT' : 'BLUE MAVERICK';
        const move = enemyMoves[Math.floor(Math.random() * enemyMoves.length)];
        logDialogue(`${enemyName} uses ${move.name}!`);
        
        // Calculate if attack hits
        const hitRoll = Math.random() * 100;
        if (hitRoll <= move.accuracy) {
            const damage = move.power + Math.random() * 10;
            gameState.playerHealth = Math.max(0, gameState.playerHealth - damage);
            p1Health.style.width = gameState.playerHealth + '%';
            
            animateCharacter(enemy, fighterFrames.attack);
            setTimeout(() => {
                animateCharacter(player, fighterFrames.hurt, 600);
                logDialogue(`It deals ${Math.round(damage)} damage!`);
            }, 400);
        } else {
            animateCharacter(enemy, fighterFrames.attack);
            logDialogue(`The attack missed!`);
        }
        
        // Check if player is defeated or continue battle
        setTimeout(() => {
            if (gameState.playerHealth <= 0) {
                endGame();
            } else {
                gameState.currentTurn = 'player';
                setTimeout(showAttackMenu, 1000);
            }
        }, 1200);
    }

    function startGame(selectedChar) {
        gameState.selectedCharacter = selectedChar;
        
        charSelectScreen.classList.remove('active');
        fightScreen.classList.add('active');
        
        // Reset game state
        gameState.playerHealth = 100;
        gameState.enemyHealth = 100;
        gameState.currentTurn = 'player';
        gameState.gameRunning = true;
        gameState.waitingForInput = false;
        
        // Update UI based on selected character
        const playerName = selectedChar === 'blue' ? 'BLUE MAVERICK' : 'RED PATRIOT';
        const enemyName = selectedChar === 'blue' ? 'RED PATRIOT' : 'BLUE MAVERICK';
        
        document.getElementById('p1-name').textContent = playerName;
        document.getElementById('p2-name').textContent = enemyName;
        
        // Set colors based on selection
        if (selectedChar === 'red') {
            document.getElementById('p1-name').style.color = 'var(--red-team)';
            document.getElementById('p1-health').style.background = 'var(--red-team)';
            document.getElementById('p2-name').style.color = 'var(--blue-team)';
            document.getElementById('p2-health').style.background = 'var(--blue-team)';
            player.style.color = 'var(--red-team)';
            enemy.style.color = 'var(--blue-team)';
        } else {
            document.getElementById('p1-name').style.color = 'var(--blue-team)';
            document.getElementById('p1-health').style.background = 'var(--blue-team)';
            document.getElementById('p2-name').style.color = 'var(--red-team)';
            document.getElementById('p2-health').style.background = 'var(--red-team)';
            player.style.color = 'var(--blue-team)';
            enemy.style.color = 'var(--red-team)';
        }
        
        // Set initial sprites
        player.textContent = fighterFrames.idle;
        enemy.textContent = fighterFrames.idle;
        
        // Reset health bars
        p1Health.style.width = '100%';
        p2Health.style.width = '100%';
        
        // Clear dialogue and create attack buttons
        dialogueSection.innerHTML = '';
        createAttackButtons();
        
        logDialogue("A wild political battle begins!");
        setTimeout(() => {
            logDialogue(`${playerName}, what will you do?`);
            showAttackMenu();
        }, 1000);
    }

    function endGame() {
        gameState.gameRunning = false;
        hideAttackMenu();
        
        logDialogue("EVENT: CORPORATE SPONSORSHIP ARRIVES!");
        document.getElementById('corporate-sponsor').style.display = 'block';
        
        setTimeout(() => {
            dialogueSection.innerHTML = `<div class="final-winner">WINNER:<br>THE SPECTACLE</div>`;
        }, 2000);
    }

    blueBox.addEventListener('click', () => startGame('blue'));
    redBox.addEventListener('click', () => startGame('red'));
</script>
</body>
</html>